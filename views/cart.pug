extends index

block head-ext
  style
    include styles/cart.css

block content
  if cart && cart.items && cart.items.length > 0
    .cart-container
      each item in cart.items
        .cart-item
          .cart-image
            if item.cover_image_url
              img(src=item.cover_image_url, alt=item.title)
            else
              img(src="/images/default-book.png", alt="Default book cover")
          .cart-info
            h2= item.title
            p.author Author: #{item.author}
            p.category Category: #{item.genre}
            p.price Price: #{item.price}
            form(action="/cart/update" method="POST")
              input(type="hidden" name="cart_item_id" value=item.cart_item_id)
              label(for="quantity") Quantity:
              input#quantity(type="number" name="quantity" value=item.quantity min="1" required)
            p.subtotal Subtotal: $#{(item.price * item.quantity).toFixed(2)}
      .cart-total
        h3 Total: $#{cart.items.reduce((total, item) => total + (item.price * item.quantity), 0).toFixed(2)}
      button.btn-update Save cart
      a.btn-checkout(type="button",href="/checkout") Checkout
  else
    .empty-cart
      p Your cart is empty.
      a.btn-back(href="/") Back to Home
